{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "Proyecto Web III - Microservicios",
		"description": "Colección de endpoints para la plataforma de venta de lotes multi-empresa",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12345678"
	},
	"item": [
		{
			"name": "Auth Service",
			"item": [
				{
					"name": "Authentication",
					"item": [
						{
							"name": "Register User",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"user_id\", jsonData.userId);",
											"    pm.environment.set(\"user_email\", jsonData.email);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"admin@example.com\",\n    \"password\": \"Admin123!\",\n    \"firstName\": \"Admin\",\n    \"lastName\": \"User\",\n    \"phoneNumber\": \"+59177777777\",\n    \"role\": \"ADMIN\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/auth/register",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"auth",
										"register"
									]
								},
								"description": "Registra un nuevo usuario en el sistema con rol ADMIN o EMPRESA"
							},
							"response": []
						},
						{
							"name": "Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"jwt_token\", jsonData.token);",
											"    pm.environment.set(\"tenant_id\", jsonData.tenantId);",
											"    pm.environment.set(\"user_role\", jsonData.role);",
											"    console.log(\"Token guardado: \" + jsonData.token);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"admin@example.com\",\n    \"password\": \"Admin123!\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/auth/login",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"auth",
										"login"
									]
								},
								"description": "Autentica un usuario y retorna un token JWT con información de tenant"
							},
							"response": []
						}
					],
					"description": "Endpoints públicos de autenticación"
				},
				{
					"name": "Company Management (Admin)",
					"item": [
						{
							"name": "Create Company",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    var message = jsonData.message;",
											"    var companyId = message.match(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i);",
											"    if (companyId) {",
											"        pm.environment.set(\"company_id\", companyId[0]);",
											"        console.log(\"Company ID guardado: \" + companyId[0]);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Inmobiliaria Santa Cruz\",\n    \"ruc\": \"1234567890\",\n    \"address\": \"Av. Monseñor Rivero 123\",\n    \"phoneNumber\": \"+59133333333\",\n    \"email\": \"contacto@inmobiliariasc.com\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/admin/companies",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"admin",
										"companies"
									]
								},
								"description": "Crea una nueva empresa inmobiliaria (requiere rol ADMIN)"
							},
							"response": []
						},
						{
							"name": "List Companies",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/admin/companies?onlyActive=true",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"admin",
										"companies"
									],
									"query": [
										{
											"key": "onlyActive",
											"value": "true",
											"description": "Filtrar solo empresas activas"
										}
									]
								},
								"description": "Lista todas las empresas registradas (requiere rol ADMIN)"
							},
							"response": []
						},
						{
							"name": "Assign User to Company",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"userId\": \"{{user_id}}\",\n    \"companyId\": \"{{company_id}}\",\n    \"role\": \"EMPRESA\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/admin/companies/assign-user",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"admin",
										"companies",
										"assign-user"
									]
								},
								"description": "Asigna un usuario a una empresa con un rol específico (requiere rol ADMIN)"
							},
							"response": []
						}
					],
					"description": "Endpoints de gestión de empresas (solo ADMIN)",
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{jwt_token}}",
								"type": "string"
							}
						]
					}
				}
			],
			"description": "Microservicio de autenticación y gestión de tenants"
		},
		{
			"name": "Proyectos & Lotes Service",
			"item": [
				{
					"name": "Proyectos",
					"item": [
						{
							"name": "Create Proyecto",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    if (jsonData.data && jsonData.data.id) {",
											"        pm.environment.set(\"proyecto_id\", jsonData.data.id);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"nombre\": \"Proyecto Los Alamos\",\n    \"descripcion\": \"Proyecto residencial en zona norte de la ciudad\",\n    \"ubicacion\": \"Av. Principal #123, Zona Norte\",\n    \"fechaInicio\": \"2025-01-15\",\n    \"fechaEstimadaFinalizacion\": \"2026-12-31\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/proyectos",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"proyectos"
									]
								},
								"description": "Crea un nuevo proyecto inmobiliario asociado al tenant del usuario autenticado"
							},
							"response": []
						},
						{
							"name": "List Proyectos",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/proyectos?activo=true",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"proyectos"
									],
									"query": [
										{
											"key": "activo",
											"value": "true",
											"description": "Filtrar solo proyectos activos (opcional)"
										}
									]
								},
								"description": "Lista todos los proyectos del tenant del usuario autenticado"
							},
							"response": []
						}
					],
					"description": "CRUD de proyectos inmobiliarios con multi-tenancy"
				},
				{
					"name": "Lotes",
					"item": [
						{
							"name": "Create Lote",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    if (jsonData.data && jsonData.data.id) {",
											"        pm.environment.set(\"lote_id\", jsonData.data.id);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"numeroLote\": \"A-001\",\n    \"manzana\": \"Manzana A\",\n    \"geometriaWKT\": \"POLYGON((0 0, 0 10, 10 10, 10 0, 0 0))\",\n    \"precio\": 50000.00,\n    \"observaciones\": \"Lote en esquina con vista panorámica\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/lotes?proyectoId={{proyecto_id}}",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"lotes"
									],
									"query": [
										{
											"key": "proyectoId",
											"value": "{{proyecto_id}}",
											"description": "ID del proyecto (requerido)"
										}
									]
								},
								"description": "Crea un lote individual con geometría WKT (Well-Known Text)"
							},
							"response": []
						},
						{
							"name": "List Lotes",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/lotes?proyectoId={{proyecto_id}}&estado=DISPONIBLE",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"lotes"
									],
									"query": [
										{
											"key": "proyectoId",
											"value": "{{proyecto_id}}",
											"description": "ID del proyecto (requerido)"
										},
										{
											"key": "estado",
											"value": "DISPONIBLE",
											"description": "Filtrar por estado: DISPONIBLE, RESERVADO, VENDIDO, NO_DISPONIBLE (opcional)"
										}
									]
								},
								"description": "Lista todos los lotes de un proyecto, opcionalmente filtrados por estado"
							},
							"response": []
						},
						{
							"name": "Import Lotes from KML",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    console.log(\"Lotes importados: \" + jsonData.data.length);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": [],
											"description": "Archivo KML con geometrías de lotes (Polygon o MultiGeometry)"
										},
										{
											"key": "proyectoId",
											"value": "{{proyecto_id}}",
											"type": "text",
											"description": "ID del proyecto"
										},
										{
											"key": "manzana",
											"value": "Manzana B",
											"type": "text",
											"description": "Manzana por defecto para todos los lotes (opcional)"
										},
										{
											"key": "precio",
											"value": "75000.00",
											"type": "text",
											"description": "Precio por defecto para todos los lotes"
										}
									]
								},
								"url": {
									"raw": "{{gateway_url}}/api/lotes/import-kml",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"lotes",
										"import-kml"
									]
								},
								"description": "Importa múltiples lotes desde un archivo KML. El sistema:\n- Parsea geometrías Polygon y MultiGeometry\n- Calcula automáticamente área y centroide\n- Asigna precio y manzana por defecto\n- Usa el nombre del Placemark como número de lote\n- Omite lotes con número duplicado"
							},
							"response": []
						}
					],
					"description": "CRUD de lotes con soporte para geometrías espaciales y importación KML"
				}
			],
			"description": "Microservicio de proyectos y lotes (Puerto 8082) - Clean Architecture con CQRS"
		},
		{
			"name": "Reservas & Leads Service",
			"item": [
				{
					"name": "Reservations",
					"item": [
						{
							"name": "Create Reservation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"reservation_id\", jsonData.data.id);",
											"    console.log(\"Reservation created: \" + jsonData.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"lotId\": \"{{lot_id}}\",\n    \"projectId\": \"{{proyecto_id}}\",\n    \"customerName\": \"Juan Pérez\",\n    \"customerEmail\": \"juan.perez@example.com\",\n    \"customerPhone\": \"+59177123456\",\n    \"customerDocument\": \"12345678\",\n    \"reservationAmount\": 5000.00,\n    \"expirationDays\": 7,\n    \"notes\": \"Cliente interesado en lote esquinero\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/reservations",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reservations"
									]
								},
								"description": "Crea una nueva reserva de lote. Estados: PENDING → CONFIRMED/CANCELLED/EXPIRED"
							},
							"response": []
						},
						{
							"name": "Confirm Reservation",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reservations/{{reservation_id}}/confirm",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reservations",
										"{{reservation_id}}",
										"confirm"
									]
								},
								"description": "Confirma una reserva pendiente. Cambia estado de PENDING a CONFIRMED."
							},
							"response": []
						},
						{
							"name": "Cancel Reservation",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reservations/{{reservation_id}}",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reservations",
										"{{reservation_id}}"
									]
								},
								"description": "Cancela una reserva. Cambia estado a CANCELLED."
							},
							"response": []
						},
						{
							"name": "List Reservations",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reservations?status=PENDING",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reservations"
									],
									"query": [
										{
											"key": "status",
											"value": "PENDING",
											"description": "Filtrar por estado: PENDING, CONFIRMED, CANCELLED, EXPIRED (opcional)"
										}
									]
								},
								"description": "Lista todas las reservas del tenant, opcionalmente filtradas por estado"
							},
							"response": []
						}
					],
					"description": "Gestión de reservas de lotes con estados y vencimiento automático"
				},
				{
					"name": "Leads",
					"item": [
						{
							"name": "Create Lead",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"lead_id\", jsonData.data.id);",
											"    console.log(\"Lead created: \" + jsonData.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"customerName\": \"María González\",\n    \"customerEmail\": \"maria.gonzalez@example.com\",\n    \"customerPhone\": \"+59177654321\",\n    \"customerDocument\": \"87654321\",\n    \"source\": \"WEB\",\n    \"interestLevel\": \"HIGH\",\n    \"notes\": \"Cliente interesado en lotes grandes\",\n    \"projectId\": \"{{proyecto_id}}\",\n    \"lotId\": \"{{lot_id}}\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/leads",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"leads"
									]
								},
								"description": "Crea un lead (cliente potencial). Estados: NEW → CONTACTED → INTERESTED → NEGOTIATING → CONVERTED/LOST"
							},
							"response": []
						},
						{
							"name": "List Leads",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/leads?status=NEW",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"leads"
									],
									"query": [
										{
											"key": "status",
											"value": "NEW",
											"description": "Filtrar por estado: NEW, CONTACTED, INTERESTED, NEGOTIATING, CONVERTED, LOST (opcional)"
										}
									]
								},
								"description": "Lista todos los leads del tenant, opcionalmente filtrados por estado"
							},
							"response": []
						}
					],
					"description": "Gestión de clientes potenciales con pipeline de ventas"
				}
			],
			"description": "Microservicio de reservas y leads (Puerto 8083) - Clean Architecture con CQRS"
		},
		{
			"name": "Payments Service",
			"item": [
				{
					"name": "Payments",
					"item": [
						{
							"name": "Create Payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"payment_id\", jsonData.data.id);",
											"    console.log(\"Payment created: \" + jsonData.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"reservationId\": \"{{reservation_id}}\",\n    \"customerName\": \"Juan Pérez\",\n    \"customerEmail\": \"juan.perez@example.com\",\n    \"customerPhone\": \"+59177123456\",\n    \"customerDocument\": \"12345678\",\n    \"amount\": 5000.00,\n    \"currency\": \"BOB\",\n    \"paymentMethod\": \"QR\",\n    \"expirationHours\": 24,\n    \"notes\": \"Pago de reserva lote A-001\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/payments",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"payments"
									]
								},
								"description": "Crea un pago con generación automática de código QR. Estados: PENDING → PROCESSING → COMPLETED/FAILED"
							},
							"response": []
						},
						{
							"name": "Confirm Payment",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transactionReference\": \"TXN-20250128-001\"\n}"
								},
								"url": {
									"raw": "{{gateway_url}}/api/payments/{{payment_id}}/confirm",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"payments",
										"{{payment_id}}",
										"confirm"
									]
								},
								"description": "Confirma un pago pendiente con referencia de transacción. Cambia estado a COMPLETED."
							},
							"response": []
						},
						{
							"name": "List Payments",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/payments?status=COMPLETED",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"payments"
									],
									"query": [
										{
											"key": "status",
											"value": "COMPLETED",
											"description": "Filtrar por estado: PENDING, PROCESSING, COMPLETED, FAILED, REFUNDED, CANCELLED (opcional)"
										}
									]
								},
								"description": "Lista todos los pagos del tenant, opcionalmente filtrados por estado"
							},
							"response": []
						},
						{
							"name": "Get Payment QR Code",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/payments/{{payment_id}}/qr",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"payments",
										"{{payment_id}}",
										"qr"
									]
								},
								"description": "Obtiene el código QR del pago como imagen PNG"
							},
							"response": []
						}
					],
					"description": "Procesamiento de pagos con generación de QR automática"
				},
				{
					"name": "Receipts",
					"item": [
						{
							"name": "Generate Receipt",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"receipt_id\", jsonData.data.id);",
											"    console.log(\"Receipt generated: \" + jsonData.data.receiptNumber);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/receipts/generate?paymentId={{payment_id}}",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"receipts",
										"generate"
									],
									"query": [
										{
											"key": "paymentId",
											"value": "{{payment_id}}",
											"description": "ID del pago completado"
										}
									]
								},
								"description": "Genera un comprobante para un pago completado. Solo se puede generar si el pago está COMPLETED."
							},
							"response": []
						},
						{
							"name": "Get Receipt",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/receipts/{{receipt_id}}",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"receipts",
										"{{receipt_id}}"
									]
								},
								"description": "Obtiene los detalles de un comprobante por ID"
							},
							"response": []
						}
					],
					"description": "Generación y consulta de comprobantes de pago"
				}
			],
			"description": "Microservicio de pagos y comprobantes (Puerto 8084) - Clean Architecture con CQRS"
		},
		{
			"name": "Reports & Analytics Service",
			"item": [
				{
					"name": "Dashboard",
					"item": [
						{
							"name": "Get Dashboard Metrics",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/dashboard/metrics",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"dashboard",
										"metrics"
									]
								},
								"description": "Obtiene métricas agregadas del dashboard: proyectos, lotes, leads, reservas, pagos"
							},
							"response": []
						},
						{
							"name": "Export Dashboard to PDF",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/dashboard/metrics/export/pdf",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"dashboard",
										"metrics",
										"export",
										"pdf"
									]
								},
								"description": "Exporta las métricas del dashboard a PDF"
							},
							"response": []
						},
						{
							"name": "Export Dashboard to Excel",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/dashboard/metrics/export/excel",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"dashboard",
										"metrics",
										"export",
										"excel"
									]
								},
								"description": "Exporta las métricas del dashboard a Excel (.xlsx)"
							},
							"response": []
						}
					],
					"description": "Métricas del dashboard con exportación a PDF y Excel"
				},
				{
					"name": "Sales Reports",
					"item": [
						{
							"name": "Get Sales Report",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/sales?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"sales"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00",
											"description": "Fecha inicio (ISO 8601)"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59",
											"description": "Fecha fin (ISO 8601)"
										}
									]
								},
								"description": "Genera reporte de ventas con datos agregados por proyecto y mes"
							},
							"response": []
						},
						{
							"name": "Export Sales Report to PDF",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/sales/export/pdf?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"sales",
										"export",
										"pdf"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Exporta reporte de ventas a PDF"
							},
							"response": []
						},
						{
							"name": "Export Sales Report to Excel",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/sales/export/excel?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"sales",
										"export",
										"excel"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Exporta reporte de ventas a Excel con múltiples hojas"
							},
							"response": []
						}
					],
					"description": "Reportes de ventas con análisis por proyecto y periodo"
				},
				{
					"name": "Financial Reports",
					"item": [
						{
							"name": "Get Financial Report",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/financial?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"financial"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Genera reporte financiero con ingresos, gastos, utilidades y márgenes"
							},
							"response": []
						},
						{
							"name": "Export Financial Report to PDF",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/financial/export/pdf?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"financial",
										"export",
										"pdf"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Exporta reporte financiero a PDF"
							},
							"response": []
						},
						{
							"name": "Export Financial Report to Excel",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/financial/export/excel?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"financial",
										"export",
										"excel"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Exporta reporte financiero a Excel"
							},
							"response": []
						}
					],
					"description": "Reportes financieros con análisis de ingresos, gastos y rentabilidad"
				},
				{
					"name": "Leads Reports",
					"item": [
						{
							"name": "Get Leads Report",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/leads?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"leads"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Genera reporte de leads con tasas de conversión y análisis por fuente"
							},
							"response": []
						}
					],
					"description": "Reportes de leads y conversión de pipeline de ventas"
				},
				{
					"name": "Projects Reports",
					"item": [
						{
							"name": "Get Projects Report",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{jwt_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gateway_url}}/api/reports/projects?startDate=2025-01-01T00:00:00&endDate=2025-04-30T23:59:59",
									"host": [
										"{{gateway_url}}"
									],
									"path": [
										"api",
										"reports",
										"projects"
									],
									"query": [
										{
											"key": "startDate",
											"value": "2025-01-01T00:00:00"
										},
										{
											"key": "endDate",
											"value": "2025-04-30T23:59:59"
										}
									]
								},
								"description": "Genera reporte de proyectos con disponibilidad de lotes y performance de ventas"
							},
							"response": []
						}
					],
					"description": "Reportes de proyectos con análisis de lotes y ventas por proyecto"
				}
			],
			"description": "Microservicio de reportes y analytics (Puerto 8085) - Clean Architecture con CQRS"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "gateway_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "auth_service_url",
			"value": "http://localhost:8081",
			"type": "string"
		},
		{
			"key": "proyectos_service_url",
			"value": "http://localhost:8082",
			"type": "string"
		},
		{
			"key": "reservas_service_url",
			"value": "http://localhost:8083",
			"type": "string"
		},
		{
			"key": "payments_service_url",
			"value": "http://localhost:8084",
			"type": "string"
		},
		{
			"key": "reports_service_url",
			"value": "http://localhost:8085",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "tenant_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "company_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_email",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_role",
			"value": "",
			"type": "string"
		},
		{
			"key": "proyecto_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "lot_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "reservation_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "lead_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "payment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "receipt_id",
			"value": "",
			"type": "string"
		}
	]
}
